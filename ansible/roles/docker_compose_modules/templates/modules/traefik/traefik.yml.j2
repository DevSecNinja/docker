---
# Traefik static configuration
global:
  checkNewVersion: true
  sendAnonymousUsage: false

log:
  level: {{ traefik_config.traefik_log_level }}

{% if traefik_config.traefik_enable_access_logs %}
accessLog:
  filePath: "/data/access.log"
  bufferingSize: 100
{% endif %}

{% if traefik_config.traefik_enable_api %}
api:
  dashboard: {{ traefik_config.traefik_enable_dashboard | lower }}
  # SECURITY: insecure mode is disabled by default
  # The dashboard requires proper authentication via middleware
  # (BasicAuth, ForwardAuth, etc.) or network-level restrictions
  insecure: false
{% endif %}

entryPoints:
  web:
    address: ":80"
  websecure:
    address: ":443"

providers:
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
    network: "{{ traefik_config.traefik_network_name }}"
  file:
    directory: "/etc/traefik/dynamic"
    watch: true
